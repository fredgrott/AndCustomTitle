#if ($jg.project.comment.name)
	#set($projectName=$jg.project.comment.name.trim())
#end
#if ($jg.project.comment.version.size() > 0)
	#set ($version = $jg.project.comment.version.get(0).content.originalString.trim())
#end
#if ($jg.project.comment.description.size() > 0)
	#set ($projectDesc = $jg.project.comment.description.get(0).content.originalString.trim())
#end
#macro (genSummary $coll $pathPart $section)
    #foreach($le in $coll)
    	
        <output file="$outDir/$pathPart/${le.path}.html">
            <param key="projectName" value="$projectName"/>
            <param key="projectDesc" value="$projectDesc"/>
            <param key="version" value="$version"/>
            #if($aux_css != "not_specified")
            <param key="aux_css" value="$aux_css"/>
            #end
            <param key="objectName" value="$le.fullName"/>
            <param key="rootPath" value=""/>
            <param key="navSection" value="$section"/>
            <param key="trueRootPath" value="../$le.rootPath"/>
        </output>
    #end	
#end
<?xml version="1.0" encoding="$encoding"?>
    <!-- Documentation build file for $projectName. Generated by jGrouseDoc-->
<project name="$projectName" default="applyJGrouseDoc">
	<target name="applyJGrouseDoc">
		<copy todir="$outDir" overwrite="yes">
            <fileset dir="$commonSkin/css" />
        </copy>
        <copy todir="$outDir" overwrite="yes">
            <fileset dir="$skinDir/css" />
        </copy>
        <copy todir="$outDir">
            <fileset dir="$commonSkin/img" />
        </copy>
        <copy todir="$outDir" overwrite="yes">
            <fileset dir="$skinDir/img" />
        </copy>
        <copy todir="$outDir" overwrite="yes">
            <fileset dir="$skinDir/js" />
        </copy>
        
        
        <vmtask resourcePath="., ${jGrouseHome}" source="${outDir}/${projectFile}" loglevel="INFO">
            <template templatename="skins/${skin}/vm/jsindex.vm" vmlibs="skins/common/vm/common.vm">
            	<output file="$outDir/jsindex.js">
                    <param key="projectName" value="$projectName"/>
                    <param key="projectDesc" value="$projectDesc"/>
                    <param key="version" value="$version"/>           
                    <param key="rootPath" value=""/>     		
                </output>
            </template>
            <template templatename="skins/${skin}/vm/detail.vm" vmlibs="skins/common/vm/common.vm">
		        <output file="$outDir/index.html">
		            <param key="projectName" value="$projectName"/>
		            <param key="projectDesc" value="$projectDesc"/>
		            <param key="version" value="$version"/>                     
		            #if($aux_css != "not_specified")
		            <param key="aux_css" value="$aux_css"/>
		            #end
		            <param key="objectName" value="_not_specified_"/>
		            <param key="navSection" value="logical"/>
		            <param key="trueRootPath" value=""/>
		            <param key="rootPath" value=""/>
		        </output>
            	
            	#genSummary($jg.logical "logical" "logical")
            	#genSummary($jg.files "physical" "file")
                #genSummary($jg.modules "physical" "module")
            </template>
        </vmtask>	        
    </target>
</project>
